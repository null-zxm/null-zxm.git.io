####Spring_AOP
* AOP术语

 * 通知：
  * 前置通知：在目标方法被调用之前调用通知功能
  * 后置通知：在目标方法完成之后调用通知，此时不会关心方法的输出是什么
  * 返回通知：在目标方法成功执行之后调用通知
  * 异常通知：在目标方法抛出异常的时候调用通知
  * 环绕通知：通知包裹了被通知的方法，在被通知的方法调用之前和调用之后执行自定义的行为（proceedingJoinPont ）
 * 连接点：
  * 连接点就是在应用执行的时候能够插入切面的一个点，这个点可以是调用方法的时候，抛出异常的时候,甚至修改图个字段时，切面代码可以利用这些点插入到应用的正常流程之中，并添加新的行为
 * 切点：
   * 切点就是定义了何处的意思，切点的定义会匹配通知所要织入的一个或多个连接点
 * 切面：
   * 切面就是通知和切点的结合
 * 引入：
   * 引入允许我们向现有的类添加新的方法或属性
 * 织入：
   * 织入就是把切面应用到目标对象创建新的代理对象的过程。

* AOP的实现

  * Spring提供了4种类型的AOP支持

    * 基于代理的经典SpringAOP
    * 纯POJO切面
    * @AspectJ注解驱动的切面
    * 注入式AspectJ切面（适用于Spring各个版本）

  * Spring在运行时通知对象

    * 通过在代理类中包裹切面，在Spring运行期把切面织入到Spring管理的bean中。代理类封装了目标类，并拦截被通知方法调用，再把调用转发给真正的目标bean，当代理拦截到方法调用时，在调用目标bean方法之前，会执行切面逻辑。

      注意：直到运用的时候才会创建代理。并且只支持方法级别的连接点

  * Spring借助AspectJ的切点表达式语言来定义Spring切面

    * AspectJ指示器

      execution	用于匹配是连接点的方法

      arg			限制连接点匹配参数为指定类型的执行方法

      this			限制连接点匹配AOP代理的bean引用为指定类型的类

      target		限制连接点匹配目标对象为指定类型的类

      within		限制连接点匹配制定的类型

* 代理类

  Spring中AOP中动态代理是用JDK的动态代理和CGLIB代理

  JDK动态代理只能对实现了接口的类生成代理，而不能针对类 

  * 如果目标对象实现了接口，默认情况下会采用JDK的动态代理实现AOP 


  * 如果目标对象实现了接口，可以强制使用CGLIB实现AOP 


  * 如果目标对象没有实现了接口，必须采用CGLIB库，spring会自动在JDK动态代理和CGLIB之间转换 

  CGLIB是针对类实现代理，主要是对指定的类生成一个子类，覆盖其中的方法 

  可以使用注解	@EnableAspectJAutoProxy(proxyTargetClass=true)

  强制使用CGLIB

  #### 注意

  被代理的对象 在被注入的时候注入的是代理过的对象所以如果是 被JDK代理的时候注入后就不能够强转

  ​