#### JAVA并发编程实战读后总结————(一)

* 线程的安全性

  * 定义：当多个线程访问某一个类的时候，不管运行时环境采用何种调度方式或者这些线程将如何交替的执行，并且在主调代码中不需要额外的同步或者协同，这个类都能够表现出正确的行为，那么这个类就是线程安全的。

  * 防范于未然

    有一些类的设计可能看上去能够正常执行，而且通过了测试并且在随后几年的时间里都能够正确的执行，但是仍然可能在某个时刻发生错误，所以设计一个安全线程类是在设计框架的时候必须要考虑的地方

  * 解决方案

    如果在设计类的时候并没有考虑到并发访问的问题那么可以用下面三种方式来修复

    * 不在线程之间共享该状态变量
    * 将状态变量修改为不可变的变量
    * 在访问状态变量时使用同步

  * 竞态条件

    最常见的竞态条件类型就是“先检查后执行(Check-Then-Act)”操作，也就是通过一个可能失效的观测结果来决定下一步的动作

    在面对竟态条件的时候可以使用现有的线程安全对象来管理类的状态，加锁机制，

  * 基本概念

    * 不变约束：不变式表达了对状态的约束，这些状态是应该符合这个约束的值的组合。不变式可以代表某种业务规则。
    * 先验条件：针对方法，规定了在条用方法之前必须为真的条件
    * 后验条件：针对方法，规定了在条用方法之后必须为真的条件
    * 有状态就是有数据存储功能。有状态对象(Stateful Bean)，就是有实例变量的对象 ，可以保存数据，是非线程安全的。在不同方法调用间不保留任何状态。
    * 无状态就是一次操作，不能保存数据。无状态对象(Stateless Bean)，就是没有实例变量的对象 .不能保存数据，是不变类，是线程安全的。

    ​